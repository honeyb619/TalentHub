@model TalentSearchWebApp.Models.ContactUsMail
@{
    ViewBag.Title = "Index";
}
<style>
    #banner {
        display: none;
    }
</style>
<header class="major">
    <h2>Contact US</h2>
</header>
<div class="container" style="background-color: whitesmoke;">
    <div class="row">
        <div class="6u wufoo">
            <section class="section">
                <ul>
                    <li>
                        <p class="font_8" style="line-height: 1.4em;"><span class="color_26">JADE</span></p>
                        <p class="font_8" style="line-height: 1.4em;">
                            <span class="color_26">PO BOX 23-123<br />
                                Mt Wellington, Auckland NZ 1060</span>
                            <br />
                            <br />
                            <a class="icon fa-envelope auto-generated-link" data-auto-recognition="true" data-content="enquiries@jadetalent.co.nz" href="mailto:enquiries@jadetalent.co.nz" data-type="mail">&emsp;enquiries@jadetalent.co.nz</a>
                            <br />
                            <span class="icon fa-phone">&emsp;021 1855321</span>
                        </p>

                    </li>
                    <li>
                        <form name="Contactus">
                            <fieldset>
                                <legend>Send Queries </legend>
                                <span>
                                    <label for="EmailNameField">Name</label>
                                    <input id="EmailNameField" name="EmailNameField" type="text" required="" placeholder="Enter Name" class="field text fn" value="" size="8" tabindex="1">
                                </span>
                                <span>
                                    <label for="EmailIDField">EMAIL</label>
                                    @Html.TextBoxFor(Model => Model.EmailId, new { placeholder = "Enter Email Address", required = "", id = "emailid" })
                                    @*<input id="EmailIDField" name="EmailIDField" type="text" class="field text fn" value="" size="8" tabindex="2">*@
                                </span>
                                <span>
                                    <label for="SubjectField">SUBJECT</label>
                                    @Html.TextBoxFor(Model => Model.Subject, new { placeholder = "Enter Subject", required = "", id = "subject" })
                                    @*<input id="SubjectField" name="SubjectField" type="text" class="field text fn" value="" size="8" tabindex="3">*@
                                </span>
                                <span>
                                    <label for="MessageField">Message</label>
                                    @Html.TextAreaFor(Model => Model.Message, new { placeholder = "Enter Message", required = "", id = "message" })
                                    @*<textarea id="MessageField" name="MessageField" class="field text ln" tabindex="4">
                                            </textarea>*@
                                </span>
                                <br />
                                <span>
                                    <input type="button" name="Send" onclick="getMessage()" value="SEND" class="btn btn-success" />
                                    <input type="submit" style="display: none" id="formsubmit" />
                                </span>
                            </fieldset>
                        </form>
                    </li>
                </ul>
            </section>
        </div>

        <div class="6u wufoo">
            <section class="section" style="background: url('../Images/image.jpg') no-repeat; height: 737px; background-position: center; margin: 1em 1em;">
            </section>
        </div>
    </div>
</div>
<script>
    function getMessage() {
        var $myForm = $('#Contactus');
        if (!$myForm.context.forms[0].checkValidity()) {
            $("#formsubmit").click();
            return;
        }
        var EnquiryObj = {};
        EnquiryObj["Name"] = $("#EmailNameField").val();
        EnquiryObj["EmailId"] = $("#emailid").val();
        EnquiryObj["Subject"] = $("#subject").val();
        EnquiryObj["Message"] = $("#message").val();
        $.ajax({
            url: '/Email/EnquiryFormEmail',
            type: "POST",
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(EnquiryObj),
            processData: false,
            cache: false,
            success: function (data) {
                EnquiryObj["Message"] = data;
                sendEnquiry(EnquiryObj).then(function () {
                    window.location = "../Home/MessagePage?messageKey=EnquirySent";
                }, function (error) {
                    alert('Please try after some time.');
                });
            },
            error: function (xhr) {
                alert('Please try after some time.');
            }
        });

    }
    function sendEnquiry(messageObj) {
        return $.ajax({
            url: '/Home/ContactUs',
            type: "POST",
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(messageObj),
            processData: false,
            cache: false,
            success: function (data) {

            },
            error: function (xhr) {
                alert('Please try after some time.');
            }
        });

    }
</script>
